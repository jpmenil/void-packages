# Template file for 'squeezelite'
pkgname=squeezelite
version=1.9.7.1283f
revision=1
_githash=f2eb393725fd21ef48e52431f48ae267957b6e7f
wrksrc="${pkgname}-${_githash}"
build_style=gnu-makefile
makedepends="alsa-lib-devel faad2-devel ffmpeg-devel libflac-devel libmad-devel libsoxr-devel libvorbis-devel mpg123-devel"
short_desc="Lightweight headless squeezebox emulator"
maintainer="Jean-Philippe Menil <jpmenil@gmail.com>"
license="GPL-3.0-or-later"
homepage="https://github.com/ralph-irving/squeezelite"
distfiles="https://github.com/ralph-irving/squeezelite/archive/${_githash}.tar.gz"
checksum=b1800157d27c0449df4e23a9bec4911a76850dbca63a0ceef95bd9957b5c3523

system_groups="squeezelite"
system_accounts="squeezelite"
squeezelite_shell="/bin/false"
squeezelite_descr="Squeezelite"

do_build() {
	make LDFLAGS="${LDFLAGS} -lasound -lpthread -lm -lrt" \
		OPTS="${OPTS} -DDSD -DRESAMPLE -DVISEXPORT -DFFMPEG -DLINKALL"
}

do_install() {
	vinstall ${FILESDIR}/squeezelite.conf 640 etc/
	vbin squeezelite
	vsv squeezelite
}
