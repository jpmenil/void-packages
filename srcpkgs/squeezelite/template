# Template file for 'squeezelite'
pkgname=squeezelite
version=1.9.8.1287
revision=1
_githash=cf2230bd8edb9397cafe97c94cda1836269ba7d9
wrksrc="${pkgname}-${_githash}"
build_style=gnu-makefile
makedepends="alsa-lib-devel faad2-devel ffmpeg-devel libflac-devel libmad-devel libsoxr-devel libvorbis-devel mpg123-devel"
short_desc="Lightweight headless squeezebox emulator"
maintainer="Jean-Philippe Menil <jpmenil@gmail.com>"
license="GPL-3.0-or-later"
homepage="https://github.com/ralph-irving/squeezelite"
distfiles="https://github.com/ralph-irving/squeezelite/archive/${_githash}.tar.gz"
checksum=fd1f02b802780e96ef38649e4f2c3e6dfaddefcd33b321a8dbf6f82955f903f4

system_groups="squeezelite"
system_accounts="squeezelite"
squeezelite_shell="/bin/false"
squeezelite_descr="Squeezelite"

do_build() {
	make LDFLAGS="${LDFLAGS} -lasound -lpthread -lm -lrt" \
		OPTS="${OPTS} -DDSD -DRESAMPLE -DVISEXPORT -DFFMPEG -DLINKALL"
}

do_install() {
	vinstall ${FILESDIR}/squeezelite.conf 640 etc/
	vbin squeezelite
	vsv squeezelite
}
