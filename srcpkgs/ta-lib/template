# Template file for 'ta-lib'
pkgname=ta-lib
version=0.4.0
revision=1
wrksrc="ta-lib"
build_style=configure
configure_args="--prefix=/usr"
hostmakedepends="curl"
short_desc="Technical Analysis Library for analyzing financial markets trend"
maintainer="Jean-Philippe Menil <jpmenil@gmail.com>"
license="BSD-3-Clause"
homepage="https://ta-lib.org"
distfiles="${SOURCEFORGE_SITE}/ta-lib/ta-lib-${version}-src.tar.gz"
checksum=9ff41efcb1c011a4b4b6dfc91610b06e39b1d7973ed5d4dee55029a0ac4dc651
patch_args="-Np1"

pre_build() {
	case "$XBPS_TARGET_MACHINE" in
	armv*|aarch*)
		curl -o config.guess "http://git.savannah.gnu.org/gitweb/?p=config.git;a=blob_plain;f=config.guess;hb=HEAD"
		curl -o config.sub "http://git.savannah.gnu.org/gitweb/?p=config.git;a=blob_plain;f=config.sub;hb=HEAD"
	esac
}

post_install() {
	sed -n '/Copyright/,/DAMAGE./p' src/ta_common/ta_global.c > LICENSE
	vlicense LICENSE
}
